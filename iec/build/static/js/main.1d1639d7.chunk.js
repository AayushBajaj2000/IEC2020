(this.webpackJsonpiec=this.webpackJsonpiec||[]).push([[0],{140:function(e,t,c){},223:function(e,t,c){},224:function(e,t,c){},225:function(e,t,c){"use strict";c.r(t);var n=c(4),a=c(1),i=c.n(a),s=c(66),r=c.n(s),l=c(17),j=c(67),o=c(18),d=(c(178),Object(a.createContext)()),b=function(e){var t=e.reducer,c=e.initialState,i=e.children;return Object(n.jsx)(d.Provider,{value:Object(a.useReducer)(t,c),children:i})},u=function(){return Object(a.useContext)(d)},O=c(240),h=c(241),x=c(237),m=c(226),p=c(134),v=p.a.initializeApp({apiKey:"AIzaSyDdeFoYKvlcEWfdzifzo6ejdJmD8VCxANA",authDomain:"contactless-payments-b6ea7.firebaseapp.com",projectId:"contactless-payments-b6ea7",storageBucket:"contactless-payments-b6ea7.appspot.com",messagingSenderId:"1078152858804",appId:"1:1078152858804:web:4d518bfbeb8f63aae71be1",measurementId:"G-HCCWYXMV1B"}).firestore(),f=p.a.auth();p.a.storage(),c(140);var g=function(){var e=Object(o.f)(),t=u(),c=Object(l.a)(t,2),i=c[0].user,s=c[1],r=Object(a.useState)("Home"),d=Object(l.a)(r,2),b=d[0],p=(d[1],Object(a.useState)(!1)),g=Object(l.a)(p,2),C=g[0],_=g[1],y=Object(a.useState)(!1),A=Object(l.a)(y,2),N=A[0],P=A[1],S=Object(a.useState)(""),w=Object(l.a)(S,2),k=w[0],I=w[1],E=Object(a.useState)(""),D=Object(l.a)(E,2),H=D[0],T=D[1],M=Object(a.useState)(""),F=Object(l.a)(M,2),B=F[0],L=F[1],R=[{name:"Home",link:"/"}].map((function(e){return Object(n.jsx)(j.b,{to:e.link,children:Object(n.jsx)(O.a.Item,{name:e.name,active:b===e.name})})}));return Object(n.jsxs)("div",{children:[Object(n.jsxs)(O.a,{pointing:!0,secondary:!0,color:"blue",inverted:!0,children:[R,Object(n.jsxs)(O.a.Menu,{position:"right",children:[Object(n.jsx)(j.b,{to:"/myaccount",children:null!==i?Object(n.jsx)(O.a.Item,{name:"My Account",active:"My Account"===b}):null}),null===i?Object(n.jsx)(O.a.Item,{name:"Login",active:"Login"===b,onClick:function(){P(!0)}}):Object(n.jsx)(O.a.Item,{name:"Logout",active:"Logout"===b,onClick:function(){s({type:"Add_user",item:null}),s({type:"Add_credit",item:0}),s({type:"Add_points",item:0}),e.push("./")}}),Object(n.jsx)(O.a.Item,{name:"Signup",active:"Signup"===b,onClick:function(){_(!0)}})]})]}),Object(n.jsxs)(h.a,{onClose:function(){return _(!1)},onOpen:function(){return _(!0)},open:C,className:"modal__login",children:[Object(n.jsx)(h.a.Header,{className:"modal__heading",children:"Sign Up "}),Object(n.jsx)(h.a.Content,{children:Object(n.jsx)(h.a.Description,{children:Object(n.jsxs)("div",{className:"modal__main",children:[Object(n.jsx)("label",{className:"modal__label",children:"Name"}),Object(n.jsx)(x.a,{placeholder:"Name",value:k.value,onChange:function(e,t){return I(t)}}),Object(n.jsx)("br",{})," ",Object(n.jsx)("br",{}),Object(n.jsx)("label",{className:"modal__label",children:"Email"}),Object(n.jsx)(x.a,{placeholder:"Email",value:H.value,onChange:function(e,t){return T(t)}}),Object(n.jsx)("br",{})," ",Object(n.jsx)("br",{}),Object(n.jsx)("label",{className:"modal__label",children:"Password"}),Object(n.jsx)(x.a,{placeholder:"password",type:"password",value:B.value,onChange:function(e,t){return L(t)}})]})})}),Object(n.jsx)(h.a.Actions,{children:Object(n.jsx)(m.a,{primary:!0,content:"Signup",labelPosition:"right",icon:"checkmark",onClick:function(e){e.preventDefault(),f.createUserWithEmailAndPassword(H.value,B.value).then((function(e){var t=Math.floor(1e9*Math.random());v.collection("Accounts").doc(t.toString()).set({name:k.value,Email:H.value,Total_Credit:0,Total_Points:0,Barcode_Number:t}).then((function(){console.log("User successfully added!"),s({type:"Add_user",item:{name:k.value,Email:H.value,Total_Credit:0,Total_Points:0,Barcode_Number:t}})})).catch((function(e){console.error("Error in adding the user to the database: ",e)}))})).catch((function(e){alert("Error in creating the user : ",e.message)})),_(!1)}})})]}),Object(n.jsxs)(h.a,{onClose:function(){return P(!1)},onOpen:function(){return P(!0)},open:N,className:"modal__login",children:[Object(n.jsx)(h.a.Header,{className:"modal__heading",children:"Login"}),Object(n.jsx)(h.a.Content,{children:Object(n.jsx)(h.a.Description,{children:Object(n.jsxs)("div",{className:"modal__main",children:[Object(n.jsx)("label",{className:"modal__label",children:"Email"}),Object(n.jsx)(x.a,{placeholder:"Email",value:H.value,onChange:function(e,t){return T(t)}}),Object(n.jsx)("br",{})," ",Object(n.jsx)("br",{}),Object(n.jsx)("label",{className:"modal__label",children:"Password"}),Object(n.jsx)(x.a,{placeholder:"password",type:"password",value:B.value,onChange:function(e,t){return L(t)}})]})})}),Object(n.jsx)(h.a.Actions,{children:Object(n.jsx)(m.a,{primary:!0,content:"Login",labelPosition:"right",icon:"checkmark",onClick:function(e){e.preventDefault(),f.signInWithEmailAndPassword(H.value,B.value).then((function(e){v.collection("Accounts").get().then((function(e){e.forEach((function(e){e.data().Email===H.value&&(s({type:"Add_user",item:e.data()}),s({type:"Add_credit",item:e.data().Total_Credit}),s({type:"Add_points",item:e.data().Total_Points}))})),P(!1),T(""),L("")})).catch((function(e){console.log("Error getting documents: ",e)}))})).catch((function(e){alert(e.message)}))}})})]})]})};var C=function(){var e=c(187),t=u(),a=Object(l.a)(t,1)[0].user;return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{style:{textAlign:"center"},children:"Please show the barcode given below to the cashier so that they can help you with the purchase"}),Object(n.jsx)("div",{className:"barcode__container",children:Object(n.jsx)(e,{value:null===a||void 0===a?void 0:a.Barcode_Number})})]})};c(223);var _=function(){return Object(n.jsx)("div",{className:"main",children:Object(n.jsx)("h1",{children:"Welcome to OntechU's Contactless payments"})})},y=c(245),A=c(242),N=c(243);function P(){var e=u(),t=Object(l.a)(e,1)[0],c=t.credit,a=t.points;return Object(n.jsxs)(y.a,{container:!0,children:[Object(n.jsx)(y.a.Row,{className:"points__container",children:Object(n.jsx)(A.a,{children:Object(n.jsx)(A.a.Content,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(A.a.Header,{children:"Points Available"}),Object(n.jsx)(A.a.Meta,{children:"1pt = $5"}),Object(n.jsxs)(A.a.Description,{children:[Object(n.jsx)(N.a,{warning:!0,total:"30",value:a,progress:"ratio"}),Object(n.jsxs)("h5",{children:["Trade is points for Items",Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"10pts for Small Priced Item (ex: mug, pencils, stationary)"}),Object(n.jsx)("li",{children:"20pts for Medium Priced Item (ex: clothes, scientific calculators)"}),Object(n.jsx)("li",{children:"30pts for Large Priced Item (ex: textbooks)"})]})]})]})]})})})}),Object(n.jsx)(y.a.Row,{className:"points__container",children:Object(n.jsx)(A.a,{children:Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Credit Available"}),Object(n.jsx)(A.a.Description,{children:Object(n.jsxs)("h5",{children:["$",c]})})]})})})]})}function S(){var e=u(),t=Object(l.a)(e,2),c=t[0],a=c.user,i=c.points,s=t[1],r=function(e){return e.map((function(e){return Object(n.jsxs)(A.a,{children:[Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:e.item}),Object(n.jsxs)(A.a.Description,{children:[e.price,"pts"]})]}),Object(n.jsx)(A.a.Content,{extra:!0,children:Object(n.jsx)("div",{className:"ui buttons",children:Object(n.jsx)(m.a,{color:"green",onClick:function(){return function(e){var t=v.collection("Accounts").doc(null===a||void 0===a?void 0:a.Barcode_Number.toString());if(e>i)alert("Insufficient points");else{var c=i-e;c>0&&t.update({Total_Points:c}).then((function(){console.log("Updated pts")})),s({type:"Add_points",item:c})}}(e.price)},children:"Use Points"})})})]})}))};return Object(n.jsxs)(y.a,{container:!0,columns:3,children:[Object(n.jsx)(y.a.Row,{children:Object(n.jsx)("h3",{children:"Small Priced Items"})}),Object(n.jsx)(y.a.Row,{children:Object(n.jsx)(A.a.Group,{children:r([{item:"Pencil",price:5},{item:"Calculator",price:5},{item:"Mug",price:5}])})}),Object(n.jsx)(y.a.Row,{children:Object(n.jsx)("h3",{children:"Medium Priced Items"})}),Object(n.jsx)(y.a.Row,{children:Object(n.jsx)(A.a.Group,{children:r([{item:"T-shirt",price:15},{item:"Lab Coat",price:12},{item:"Backpack",price:14}])})}),Object(n.jsx)(y.a.Row,{children:Object(n.jsx)("h3",{children:"Large Priced Items"})}),Object(n.jsx)(y.a.Row,{children:Object(n.jsx)(A.a.Group,{children:r([{item:"Calculus Textbook",price:25},{item:"Physics Textbook",price:28},{item:"UOIT x Adidas Clothing",price:30}])})})]})}var w=c(238),k=c(239);c(224);function I(){var e=u(),t=Object(l.a)(e,2),c=t[0],i=c.user,s=c.credit,r=c.points,j=t[1],o=Object(a.useState)(0),d=Object(l.a)(o,2),b=d[0],O=d[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),f=p[0],g=p[1],C=Object(a.useState)(""),_=Object(l.a)(C,2),y=_[0],N=_[1],P=Object(a.useState)(""),S=Object(l.a)(P,2),I=S[0],E=S[1],D=Object(a.useState)(""),H=Object(l.a)(D,2),T=H[0],M=H[1],F=v.collection("Accounts").doc(null===i||void 0===i?void 0:i.Barcode_Number.toString());console.log(F);return Object(n.jsx)("div",{className:"center",children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(A.a,{children:Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Name"}),Object(n.jsx)(A.a.Description,{children:null===i||void 0===i?void 0:i.name})]})}),Object(n.jsx)(A.a,{children:Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Email"}),Object(n.jsx)(A.a.Description,{children:null===i||void 0===i?void 0:i.Email})]})}),Object(n.jsx)(A.a,{children:Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Points Available"}),Object(n.jsx)(A.a.Description,{children:r})]})}),Object(n.jsxs)(A.a,{children:[Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Add Funds"}),Object(n.jsx)(A.a.Meta,{children:s}),Object(n.jsx)(A.a.Description,{children:Object(n.jsx)(k.a,{children:Object(n.jsxs)(k.a.Field,{children:[Object(n.jsx)("label",{children:"Amount $"}),Object(n.jsx)(x.a,{value:b.value,onChange:function(e,t){return O(t)}})]})})})]}),Object(n.jsx)(A.a.Content,{extra:!0,children:Object(n.jsx)(m.a,{onClick:function(){if(b.value>0){var e=parseFloat(s)+parseFloat(b.value);F.update({Total_Credit:e}).then((function(){console.log("Updated funds")})),j({type:"Add_credit",item:e}),O(0)}else alert("Please input the right amount")},primary:!0,children:"Add Funds"})})]}),Object(n.jsxs)(A.a,{children:[Object(n.jsxs)(A.a.Content,{children:[Object(n.jsx)(A.a.Header,{children:"Enter Payment Info"}),Object(n.jsx)(A.a.Description,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsxs)(k.a.Field,{children:[Object(n.jsx)("label",{children:"Card Holder Name"}),Object(n.jsx)("input",{value:f.value,onChange:function(e){g(e)}})]}),Object(n.jsxs)(k.a.Field,{children:[Object(n.jsx)("label",{children:"Card Number"}),Object(n.jsx)("input",{value:y.value,onChange:function(e){N(e)}})]}),Object(n.jsxs)(k.a.Field,{children:[Object(n.jsx)("label",{children:"CCV"}),Object(n.jsx)("input",{value:T.value,onChange:function(e){M(e)}})]}),Object(n.jsxs)(k.a.Field,{children:[Object(n.jsx)("label",{children:"Expiry Date 'mm/yy'"}),Object(n.jsx)("input",{value:I.value,onChange:function(e){E(e)}})]})]})})]}),Object(n.jsx)(A.a.Content,{extra:!0,children:Object(n.jsx)(m.a,{onClick:function(){g(""),N(""),E(""),M(""),console.log("Added Cards")},primary:!0,children:"Add Card"})})]})]})})}var E=function(){var e=u(),t=Object(l.a)(e,1)[0].user;return Object(n.jsxs)(j.a,{children:[Object(n.jsx)(g,{}),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",children:null!==t?Object(n.jsxs)("div",{style:{backgroundImage:"url(uoit.png)"},children:[Object(n.jsx)(C,{}),Object(n.jsx)(P,{}),Object(n.jsx)(S,{})]}):Object(n.jsx)(_,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/myaccount",children:null==t?Object(n.jsx)(_,{}):Object(n.jsx)(I,{})}),Object(n.jsx)(o.a,{path:"/:x",exact:!0,children:Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:"404 Page not found"})})})]})]})},D=c(49),H=function(e,t){switch(t.type){case"Add_user":return Object(D.a)(Object(D.a)({},e),{},{user:t.item});case"Add_credit":return Object(D.a)(Object(D.a)({},e),{},{credit:t.item});case"Add_points":return Object(D.a)(Object(D.a)({},e),{},{points:t.item});case"Add_barcode":return Object(D.a)(Object(D.a)({},e),{},{barcode:t.item});default:return e}};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(j.a,{children:Object(n.jsx)(b,{initialState:{user:null,credit:0,points:0,barcode:0},reducer:H,children:Object(n.jsx)(E,{})})})}),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.1d1639d7.chunk.js.map